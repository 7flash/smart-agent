name: memory
description: |
  Persist and retrieve structured data via the geeksy Memory API.
  Use this to store research findings, contacts, config, notes, or any
  key-value data that should survive between agent sessions.

  Keys use dot-notation for grouping:
    research.ai-trends     → groups under RESEARCH
    contacts.john          → groups under CONTACTS
    config.telegram.apiKey → groups under CONFIG

  Values can be plain strings or JSON-serialized objects.

env:
  STATE_URL: "The base URL for the Memory API (injected by scheduler)"

commands:
  - name: get
    description: Read a single value by key
    usage: |
      curl "$STATE_URL?agentId={agentId}&key={key}"
    params:
      agentId: "Your agent ID (number)"
      key: "Dot-notation key, e.g. research.ai-trends"
    example: |
      curl "$STATE_URL?agentId=1&key=research.ai-trends"
      # → { "agentId": 1, "key": "research.ai-trends", "value": "{...}" }

  - name: list
    description: List all memory entries for your agent
    usage: |
      curl "$STATE_URL?agentId={agentId}"
    params:
      agentId: "Your agent ID (number)"
    example: |
      curl "$STATE_URL?agentId=1"
      # → [{ "id": 1, "agentId": 1, "key": "research.ai-trends", "value": "{...}" }, ...]

  - name: set
    description: Store or update a value (upserts — creates if new, updates if exists)
    usage: |
      curl -X POST "$STATE_URL" \
        -H "Content-Type: application/json" \
        -d '{"agentId": {agentId}, "key": "{key}", "value": "{value}"}'
    params:
      agentId: "Your agent ID (number)"
      key: "Dot-notation key"
      value: "String value — use JSON.stringify for objects"
    example: |
      curl -X POST "$STATE_URL" \
        -H "Content-Type: application/json" \
        -d '{"agentId": 1, "key": "research.ai-trends", "value": "{\"topic\": \"multimodal agents\", \"findings\": [\"GPT-5 rumored\", \"Claude 4 released\"], \"date\": \"2026-02-25\"}"}'

  - name: delete
    description: Remove a memory entry
    usage: |
      curl -X DELETE "$STATE_URL?agentId={agentId}&key={key}"
    params:
      agentId: "Your agent ID (number)"
      key: "Key to delete"

best_practices:
  - Use descriptive, hierarchical keys: research.topic-name, contacts.person-name
  - Store JSON objects for structured data, not plain text
  - Always include a date field in stored objects for temporal context
  - Read existing memory before writing to avoid overwriting important data
  - Group related data under a common prefix for easy browsing in the Memory tab
